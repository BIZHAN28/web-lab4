{"ast":null,"code":"/*\n    Copyright 2008-2023\n        Matthias Ehmann,\n        Carsten Miller,\n        Andreas Walter,\n        Alfred Wassermann\n\n    This file is part of JSXGraph.\n\n    JSXGraph is free software dual licensed under the GNU LGPL or MIT License.\n\n    You can redistribute it and/or modify it under the terms of the\n\n      * GNU Lesser General Public License as published by\n        the Free Software Foundation, either version 3 of the License, or\n        (at your option) any later version\n      OR\n      * MIT License: https://github.com/jsxgraph/jsxgraph/blob/master/LICENSE.MIT\n\n    JSXGraph is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License and\n    the MIT License along with JSXGraph. If not, see <https://www.gnu.org/licenses/>\n    and <https://opensource.org/licenses/MIT/>.\n */\n/*global JXG:true, define: true*/\n\nimport JXG from \"../jxg\";\nimport Const from \"../base/constants\";\nimport Type from \"../utils/type\";\nimport Mat from \"../math/math\";\nimport GeometryElement from \"../base/element\";\nimport Composition from \"../base/composition\";\n\n/**\n * 3D view inside of a JXGraph board.\n *\n * @class Creates a new 3D view. Do not use this constructor to create a 3D view. Use {@link JXG.Board#create} with\n * type {@link View3D} instead.\n *\n * @augments JXG.GeometryElement\n * @param {Array} parents Array consisting of lower left corner [x, y] of the view inside the board, [width, height] of the view\n * and box size [[x1, x2], [y1,y2], [z1,z2]]. If the view's azimuth=0 and elevation=0, the 3D view will cover a rectangle with lower left corner\n * [x,y] and side lengths [w, h] of the board.\n */\nJXG.View3D = function (board, parents, attributes) {\n  this.constructor(board, attributes, Const.OBJECT_TYPE_VIEW3D, Const.OBJECT_CLASS_3D);\n\n  /**\n   * An associative array containing all geometric objects belonging to the view.\n   * Key is the id of the object and value is a reference to the object.\n   * @type Object\n   * @private\n   */\n  this.objects = {};\n\n  /**\n   * An array containing all geometric objects in this view in the order of construction.\n   * @type Array\n   * @private\n   */\n  // this.objectsList = [];\n\n  /**\n   * An associative array / dictionary to store the objects of the board by name. The name of the object is the key and value is a reference to the object.\n   * @type Object\n   * @private\n   */\n  this.elementsByName = {};\n\n  /**\n   * Default axes of the 3D view, contains the axes of the view or null.\n   *\n   * @type {Object}\n   * @default null\n   */\n  this.defaultAxes = null;\n\n  /**\n   * @type  {Array}\n   * @private\n  */\n  // 3 x 4 matrix\n  // 3D-to-2D transformation matrix\n  this.matrix3D = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0]];\n\n  /**\n   * @type array\n   * @private\n  */\n  //     Lower left corner [x, y] of the 3D view if elevation and azimuth are set to 0.\n  this.llftCorner = parents[0];\n\n  /**\n   * Width and height [w, h] of the 3D view if elevation and azimuth are set to 0.\n   * @type array\n   * @private\n   */\n  this.size = parents[1];\n\n  /**\n   * Bounding box (cube) [[x1, x2], [y1,y2], [z1,z2]] of the 3D view\n   * @type array\n   */\n  this.bbox3D = parents[2];\n\n  /**\n   * Distance of the view to the origin. In other words, its\n   * the radius of the sphere where the camera sits.view.board.update\n   * @type Number\n   */\n  this.r = -1;\n  this.projectionType = 'parallel';\n  this.timeoutAzimuth = null;\n  this.id = this.board.setId(this, \"V\");\n  this.board.finalizeAdding(this);\n  this.elType = \"view3d\";\n  this.methodMap = Type.deepCopy(this.methodMap, {\n    // TODO\n  });\n};\nJXG.View3D.prototype = new GeometryElement();\nJXG.extend(JXG.View3D.prototype, /** @lends JXG.View3D.prototype */{\n  /**\n   * Creates a new 3D element of type elementType.\n   * @param {String} elementType Type of the element to be constructed given as a string e.g. 'point3d' or 'surface3d'.\n   * @param {Array} parents Array of parent elements needed to construct the element e.g. coordinates for a 3D point or two\n   * 3D points to construct a line. This highly depends on the elementType that is constructed. See the corresponding JXG.create*\n   * methods for a list of possible parameters.\n   * @param {Object} [attributes] An object containing the attributes to be set. This also depends on the elementType.\n   * Common attributes are name, visible, strokeColor.\n   * @returns {Object} Reference to the created element. This is usually a GeometryElement3D, but can be an array containing\n   * two or more elements.\n   */\n  create: function (elementType, parents, attributes) {\n    var prefix = [],\n      // is3D = false,\n      el;\n    if (elementType.indexOf(\"3d\") > 0) {\n      // is3D = true;\n      prefix.push(this);\n    }\n    el = this.board.create(elementType, prefix.concat(parents), attributes);\n    return el;\n  },\n  /**\n   * Select a single or multiple elements at once.\n   * @param {String|Object|function} str The name, id or a reference to a JSXGraph 3D element in the 3D view. An object will\n   * be used as a filter to return multiple elements at once filtered by the properties of the object.\n   * @param {Boolean} onlyByIdOrName If true (default:false) elements are only filtered by their id, name or groupId.\n   * The advanced filters consisting of objects or functions are ignored.\n   * @returns {JXG.GeometryElement3D|JXG.Composition}\n   * @example\n   * // select the element with name A\n   * view.select('A');\n   *\n   * // select all elements with strokecolor set to 'red' (but not '#ff0000')\n   * view.select({\n   *   strokeColor: 'red'\n   * });\n   *\n   * // select all points on or below the x/y plane and make them black.\n   * view.select({\n   *   elType: 'point3d',\n   *   Z: function (v) {\n   *     return v <= 0;\n   *   }\n   * }).setAttribute({color: 'black'});\n   *\n   * // select all elements\n   * view.select(function (el) {\n   *   return true;\n   * });\n   */\n  select: function (str, onlyByIdOrName) {\n    var flist,\n      olist,\n      i,\n      l,\n      s = str;\n    if (s === null) {\n      return s;\n    }\n\n    // It's a string, most likely an id or a name.\n    if (Type.isString(s) && s !== \"\") {\n      // Search by ID\n      if (Type.exists(this.objects[s])) {\n        s = this.objects[s];\n        // Search by name\n      } else if (Type.exists(this.elementsByName[s])) {\n        s = this.elementsByName[s];\n        // // Search by group ID\n        // } else if (Type.exists(this.groups[s])) {\n        //     s = this.groups[s];\n      }\n\n      // It's a function or an object, but not an element\n    } else if (!onlyByIdOrName && (Type.isFunction(s) || Type.isObject(s) && !Type.isFunction(s.setAttribute))) {\n      flist = Type.filterElements(this.objectsList, s);\n      olist = {};\n      l = flist.length;\n      for (i = 0; i < l; i++) {\n        olist[flist[i].id] = flist[i];\n      }\n      s = new Composition(olist);\n\n      // It's an element which has been deleted (and still hangs around, e.g. in an attractor list\n    } else if (Type.isObject(s) && Type.exists(s.id) && !Type.exists(this.objects[s.id])) {\n      s = null;\n    }\n    return s;\n  },\n  updateParallelProjection: function () {\n    var r,\n      a,\n      e,\n      f,\n      mat = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0]];\n\n    // mat projects homogeneous 3D coords in View3D\n    // to homogeneous 2D coordinates in the board\n    e = this.el_slide.Value();\n    r = this.r;\n    a = this.az_slide.Value();\n    f = r * Math.sin(e);\n    mat[1][1] = r * Math.cos(a);\n    mat[1][2] = -r * Math.sin(a);\n    mat[2][1] = f * Math.sin(a);\n    mat[2][2] = f * Math.cos(a);\n    mat[2][3] = Math.cos(e);\n    return mat;\n  },\n  updateCentralProjection: function () {\n    var r,\n      e,\n      a,\n      az,\n      ax,\n      ay,\n      v,\n      nrm,\n      // See https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/graphics_6_1_eng_web.html\n      // bbox3D is always at the world origin, i.e. T_obj is the unit matrix.\n      // All vectors contain affine coordinates and have length 3\n      // The matrices are of size 4x4.\n      Tcam1,\n      // The inverse camera transformation\n      eye,\n      d,\n      foc = 1 / Math.tan(0.5 * Math.PI / 2),\n      zf = 20,\n      zn = 8,\n      Pref = [0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]), 0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]), 0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1])],\n      up = [0, 0, 1],\n      A = [[0, 0, 0, -1], [0, foc, 0, 0], [0, 0, foc, 0], [2 * zf * zn / (zn - zf), 0, 0, (zf + zn) / (zn - zf)]];\n    a = this.az_slide.Value();\n    e = this.el_slide.Value() * 2;\n    // r = this.r;\n\n    // Sphere\n    r = 12;\n    a += 3 * Math.PI * 0.5;\n    eye = [r * Math.cos(a) * Math.cos(e), -r * Math.sin(a) * Math.cos(e), r * Math.sin(e)];\n\n    // Circle\n    // r = 8;\n    // // up = [0, Math.cos(e), Math.sin(e)];\n    // up = [0, 0, 1];\n    // eye = [\n    //     -r * Math.cos(a),\n    //     -r * Math.sin(a),\n    //     1. * r\n    // ];\n\n    d = [eye[0] - Pref[0], eye[1] - Pref[1], eye[2] - Pref[2]];\n    nrm = Mat.norm(d, 3);\n    az = [d[0] / nrm, d[1] / nrm, d[2] / nrm];\n    nrm = Mat.norm(up, 3);\n    v = [up[0] / nrm, up[1] / nrm, up[2] / nrm];\n    ax = Mat.crossProduct(v, az);\n    ay = Mat.crossProduct(az, ax);\n    v = Mat.matVecMult([ax, ay, az], eye);\n    Tcam1 = [[1, 0, 0, 0], [-v[0], ax[0], ax[1], ax[2]], [-v[1], ay[0], ay[1], ay[2]], [-v[2], az[0], az[1], az[2]]];\n    A = Mat.matMatMult(A, Tcam1);\n    return A;\n  },\n  update: function () {\n    // Update 3D-to-2D transformation matrix with the actual\n    // elevation and azimuth angles.\n\n    var mat2D, shift, size;\n    if (!Type.exists(this.el_slide) || !Type.exists(this.az_slide) || !this.needsUpdate) {\n      return this;\n    }\n    mat2D = [[1, 0, 0], [0, 1, 0], [0, 0, 1]];\n    this.projectionType = Type.evaluate(this.visProp.projection);\n    if (this.projectionType === 'parallel') {\n      // Parallel projection\n      // Rotate the scenery around the center of the box,\n      // not around the origin\n      shift = [[1, 0, 0, 0], [-0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]), 1, 0, 0], [-0.5 * (this.bbox3D[1][0] + this.bbox3D[1][1]), 0, 1, 0], [-0.5 * (this.bbox3D[2][0] + this.bbox3D[2][1]), 0, 0, 1]];\n\n      // Add a second transformation to scale and shift the projection\n      // on the board, usually called viewport.\n      mat2D[1][1] = this.size[0] / (this.bbox3D[0][1] - this.bbox3D[0][0]); // w / d_x\n      mat2D[2][2] = this.size[1] / (this.bbox3D[1][1] - this.bbox3D[1][0]); // h / d_y\n      mat2D[1][0] = this.llftCorner[0] + mat2D[1][1] * 0.5 * (this.bbox3D[0][1] - this.bbox3D[0][0]); // llft_x\n      mat2D[2][0] = this.llftCorner[1] + mat2D[2][2] * 0.5 * (this.bbox3D[1][1] - this.bbox3D[1][0]); // llft_y\n\n      // this.matrix3D is a 3x4 matrix\n      this.matrix3D = this.updateParallelProjection();\n      // Combine the projections\n      this.matrix3D = Mat.matMatMult(mat2D, Mat.matMatMult(this.matrix3D, shift));\n    } else {\n      // Central projection\n      // this.matrix3D is a 4x4 matrix\n      this.matrix3D = this.updateCentralProjection();\n      size = 0.4;\n      mat2D[1][1] = this.size[0] / (2 * size); // w / d_x\n      mat2D[2][2] = this.size[1] / (2 * size); // h / d_y\n      mat2D[1][0] = this.llftCorner[0] + mat2D[1][1] * 0.5 * (2 * size); // llft_x\n      mat2D[2][0] = this.llftCorner[1] + mat2D[2][2] * 0.5 * (2 * size); // llft_y\n\n      // The transformations this.matrix3D and mat2D can not be combined yet, since\n      // the projected vector has to be normalized in between in\n      // project3DTo2D\n      this.viewPortTransform = mat2D;\n    }\n    return this;\n  },\n  updateRenderer: function () {\n    this.needsUpdate = false;\n    return this;\n  },\n  removeObject: function (object, saveMethod) {\n    var i;\n\n    // this.board.removeObject(object, saveMethod);\n    if (Type.isArray(object)) {\n      for (i = 0; i < object.length; i++) {\n        this.removeObject(object[i]);\n      }\n      return this;\n    }\n    object = this.select(object);\n\n    // // If the object which is about to be removed unknown or a string, do nothing.\n    // // it is a string if a string was given and could not be resolved to an element.\n    if (!Type.exists(object) || Type.isString(object)) {\n      return this;\n    }\n    try {\n      //     // remove all children.\n      //     for (el in object.childElements) {\n      //         if (object.childElements.hasOwnProperty(el)) {\n      //             object.childElements[el].board.removeObject(object.childElements[el]);\n      //         }\n      //     }\n\n      delete this.objects[object.id];\n    } catch (e) {\n      JXG.debug(\"View3D \" + object.id + \": Could not be removed: \" + e);\n    }\n\n    // this.update();\n\n    this.board.removeObject(object, saveMethod);\n    return this;\n  },\n  /**\n   * Project 3D coordinates to 2D board coordinates\n   * The 3D coordinates are provides as three numbers x, y, z or one array of length 3.\n   *\n   * @param  {Number|Array} x\n   * @param  {Number[]} y\n   * @param  {Number[]} z\n   * @returns {Array} Array of length 3 containing the projection on to the board\n   * in homogeneous user coordinates.\n   */\n  project3DTo2D: function (x, y, z) {\n    var vec, w;\n    if (arguments.length === 3) {\n      vec = [1, x, y, z];\n    } else {\n      // Argument is an array\n      if (x.length === 3) {\n        vec = [1].concat(x);\n      } else {\n        vec = x;\n      }\n    }\n    w = Mat.matVecMult(this.matrix3D, vec);\n    if (this.projectionType === 'parallel') {\n      return w;\n    }\n\n    // Central projection\n    w[1] /= w[0];\n    w[2] /= w[0];\n    w[3] /= w[0];\n    w[0] /= w[0];\n    return Mat.matVecMult(this.viewPortTransform, w.slice(0, 3));\n  },\n  /**\n   * Project a 2D coordinate to the plane defined by point \"foot\"\n   * and the normal vector `normal`.\n   *\n   * @param  {JXG.Point} point2d\n   * @param  {Array} normal\n   * @param  {Array} foot\n   * @returns {Array} of length 4 containing the projected\n   * point in homogeneous coordinates.\n   */\n  project2DTo3DPlane: function (point2d, normal, foot) {\n    var mat,\n      rhs,\n      d,\n      le,\n      n = normal.slice(1),\n      sol = [1, 0, 0, 0];\n    foot = foot || [1, 0, 0, 0];\n    le = Mat.norm(n, 3);\n    d = Mat.innerProduct(foot.slice(1), n, 3) / le;\n    mat = this.matrix3D.slice(0, 3); // True copy\n    mat.push([0].concat(n));\n\n    // 2D coordinates of point:\n    rhs = point2d.coords.usrCoords.concat([d]);\n    try {\n      // Prevent singularity in case elevation angle is zero\n      if (mat[2][3] === 1.0) {\n        mat[2][1] = mat[2][2] = Mat.eps * 0.001;\n      }\n      sol = Mat.Numerics.Gauss(mat, rhs);\n    } catch (err) {\n      sol = [0, NaN, NaN, NaN];\n    }\n    return sol;\n  },\n  /**\n   * Project a 2D coordinate to a new 3D position by keeping\n   * the 3D x, y coordinates and changing only the z coordinate.\n   * All horizontal moves of the 2D point are ignored.\n   *\n   * @param {JXG.Point} point2d\n   * @param {Array} coords3D\n   * @returns {Array} of length 4 containing the projected\n   * point in homogeneous coordinates.\n   */\n  project2DTo3DVertical: function (point2d, coords3D) {\n    var m3D = this.matrix3D[2],\n      b = m3D[3],\n      rhs = point2d.coords.usrCoords[2]; // y in 2D\n\n    rhs -= m3D[0] * m3D[0] + m3D[1] * coords3D[1] + m3D[2] * coords3D[2];\n    if (Math.abs(b) < Mat.eps) {\n      return coords3D; // No changes\n    } else {\n      return coords3D.slice(0, 3).concat([rhs / b]);\n    }\n  },\n  /**\n   * Limit 3D coordinates to the bounding cube.\n   *\n   * @param {Array} c3d 3D coordinates [x,y,z]\n   * @returns Array with updated 3D coordinates.\n   */\n  project3DToCube: function (c3d) {\n    var cube = this.bbox3D;\n    if (c3d[1] < cube[0][0]) {\n      c3d[1] = cube[0][0];\n    }\n    if (c3d[1] > cube[0][1]) {\n      c3d[1] = cube[0][1];\n    }\n    if (c3d[2] < cube[1][0]) {\n      c3d[2] = cube[1][0];\n    }\n    if (c3d[2] > cube[1][1]) {\n      c3d[2] = cube[1][1];\n    }\n    if (c3d[3] < cube[2][0]) {\n      c3d[3] = cube[2][0];\n    }\n    if (c3d[3] > cube[2][1]) {\n      c3d[3] = cube[2][1];\n    }\n    return c3d;\n  },\n  /**\n   * Intersect a ray with the bounding cube of the 3D view.\n   * @param {Array} p 3D coordinates [x,y,z]\n   * @param {Array} d 3D direction vector of the line (array of length 3)\n   * @param {Number} r direction of the ray (positive if r > 0, negative if r < 0).\n   * @returns Affine ratio of the intersection of the line with the cube.\n   */\n  intersectionLineCube: function (p, d, r) {\n    var rnew, i, r0, r1;\n    rnew = r;\n    for (i = 0; i < 3; i++) {\n      if (d[i] !== 0) {\n        r0 = (this.bbox3D[i][0] - p[i]) / d[i];\n        r1 = (this.bbox3D[i][1] - p[i]) / d[i];\n        if (r < 0) {\n          rnew = Math.max(rnew, Math.min(r0, r1));\n        } else {\n          rnew = Math.min(rnew, Math.max(r0, r1));\n        }\n      }\n    }\n    return rnew;\n  },\n  /**\n   * Test if coordinates are inside of the bounding cube.\n   * @param {array} q 3D coordinates [x,y,z] of a point.\n   * @returns Boolean\n   */\n  isInCube: function (q) {\n    return q[0] > this.bbox3D[0][0] - Mat.eps && q[0] < this.bbox3D[0][1] + Mat.eps && q[1] > this.bbox3D[1][0] - Mat.eps && q[1] < this.bbox3D[1][1] + Mat.eps && q[2] > this.bbox3D[2][0] - Mat.eps && q[2] < this.bbox3D[2][1] + Mat.eps;\n  },\n  /**\n   *\n   * @param {JXG.Plane3D} plane1\n   * @param {JXG.Plane3D} plane2\n   * @param {JXG.Plane3D} d\n   * @returns {Array} of length 2 containing the coordinates of the defining points of\n   * of the intersection segment.\n   */\n  intersectionPlanePlane: function (plane1, plane2, d) {\n    var ret = [[], []],\n      p,\n      dir,\n      r,\n      q;\n    d = d || plane2.d;\n    p = Mat.Geometry.meet3Planes(plane1.normal, plane1.d, plane2.normal, d, Mat.crossProduct(plane1.normal, plane2.normal), 0);\n    dir = Mat.Geometry.meetPlanePlane(plane1.vec1, plane1.vec2, plane2.vec1, plane2.vec2);\n    r = this.intersectionLineCube(p, dir, Infinity);\n    q = Mat.axpy(r, dir, p);\n    if (this.isInCube(q)) {\n      ret[0] = q;\n    }\n    r = this.intersectionLineCube(p, dir, -Infinity);\n    q = Mat.axpy(r, dir, p);\n    if (this.isInCube(q)) {\n      ret[1] = q;\n    }\n    return ret;\n  },\n  /**\n   * Generate mesh for a surface / plane.\n   * Returns array [dataX, dataY] for a JSXGraph curve's updateDataArray function.\n   * @param {Array|Function} func\n   * @param {Array} interval_u\n   * @param {Array} interval_v\n   * @returns Array\n   * @private\n   *\n   * @example\n   *  var el = view.create('curve', [[], []]);\n   *  el.updateDataArray = function () {\n   *      var steps_u = Type.evaluate(this.visProp.stepsu),\n   *           steps_v = Type.evaluate(this.visProp.stepsv),\n   *           r_u = Type.evaluate(this.range_u),\n   *           r_v = Type.evaluate(this.range_v),\n   *           func, ret;\n   *\n   *      if (this.F !== null) {\n   *          func = this.F;\n   *      } else {\n   *          func = [this.X, this.Y, this.Z];\n   *      }\n   *      ret = this.view.getMesh(func,\n   *          r_u.concat([steps_u]),\n   *          r_v.concat([steps_v]));\n   *\n   *      this.dataX = ret[0];\n   *      this.dataY = ret[1];\n   *  };\n   *\n   */\n  getMesh: function (func, interval_u, interval_v) {\n    var i_u,\n      i_v,\n      u,\n      v,\n      c2d,\n      delta_u,\n      delta_v,\n      p = [0, 0, 0],\n      steps_u = interval_u[2],\n      steps_v = interval_v[2],\n      dataX = [],\n      dataY = [];\n    delta_u = (Type.evaluate(interval_u[1]) - Type.evaluate(interval_u[0])) / steps_u;\n    delta_v = (Type.evaluate(interval_v[1]) - Type.evaluate(interval_v[0])) / steps_v;\n    for (i_u = 0; i_u <= steps_u; i_u++) {\n      u = interval_u[0] + delta_u * i_u;\n      for (i_v = 0; i_v <= steps_v; i_v++) {\n        v = interval_v[0] + delta_v * i_v;\n        if (Type.isFunction(func)) {\n          p = func(u, v);\n        } else {\n          p = [func[0](u, v), func[1](u, v), func[2](u, v)];\n        }\n        c2d = this.project3DTo2D(p);\n        dataX.push(c2d[1]);\n        dataY.push(c2d[2]);\n      }\n      dataX.push(NaN);\n      dataY.push(NaN);\n    }\n    for (i_v = 0; i_v <= steps_v; i_v++) {\n      v = interval_v[0] + delta_v * i_v;\n      for (i_u = 0; i_u <= steps_u; i_u++) {\n        u = interval_u[0] + delta_u * i_u;\n        if (Type.isFunction(func)) {\n          p = func(u, v);\n        } else {\n          p = [func[0](u, v), func[1](u, v), func[2](u, v)];\n        }\n        c2d = this.project3DTo2D(p);\n        dataX.push(c2d[1]);\n        dataY.push(c2d[2]);\n      }\n      dataX.push(NaN);\n      dataY.push(NaN);\n    }\n    return [dataX, dataY];\n  },\n  /**\n   *\n   */\n  animateAzimuth: function () {\n    var s = this.az_slide._smin,\n      e = this.az_slide._smax,\n      sdiff = e - s,\n      newVal = this.az_slide.Value() + 0.1;\n    this.az_slide.position = (newVal - s) / sdiff;\n    if (this.az_slide.position > 1) {\n      this.az_slide.position = 0.0;\n    }\n    this.board.update();\n    this.timeoutAzimuth = setTimeout(function () {\n      this.animateAzimuth();\n    }.bind(this), 200);\n  },\n  /**\n   *\n   */\n  stopAzimuth: function () {\n    clearTimeout(this.timeoutAzimuth);\n    this.timeoutAzimuth = null;\n  },\n  /**\n   * Check if vertical dragging is enabled and which action is needed.\n   * Default is shiftKey.\n   *\n   * @returns Boolean\n   * @private\n   */\n  isVerticalDrag: function () {\n    var b = this.board,\n      key;\n    if (!Type.evaluate(this.visProp.verticaldrag.enabled)) {\n      return false;\n    }\n    key = '_' + Type.evaluate(this.visProp.verticaldrag.key) + 'Key';\n    return b[key];\n  }\n});\n\n/**\n * @class This element creates a 3D view.\n * @pseudo\n * @description  A View3D element provides the container and the methods to create and display 3D elements.\n * It is contained in a JSXGraph board.\n * @name View3D\n * @augments JXG.View3D\n * @constructor\n * @type Object\n * @throws {Exception} If the element cannot be constructed with the given parent objects an exception is thrown.\n * @param {Array_Array_Array} lower,dim,cube  Here, lower is an array of the form [x, y] and\n * dim is an array of the form [w, h].\n * The arrays [x, y] and [w, h] define the 2D frame into which the 3D cube is\n * (roughly) projected. If the view's azimuth=0 and elevation=0, the 3D view will cover a rectangle with lower left corner\n * [x,y] and side lengths [w, h] of the board.\n * The array 'cube' is of the form [[x1, x2], [y1, y2], [z1, z2]]\n * which determines the coordinate ranges of the 3D cube.\n *\n * @example\n *  var bound = [-5, 5];\n *  var view = board.create('view3d',\n *      [[-6, -3],\n *       [8, 8],\n *       [bound, bound, bound]],\n *      {\n *          // Main axes\n *          axesPosition: 'center',\n *          xAxis: { strokeColor: 'blue', strokeWidth: 3},\n *\n *          // Planes\n *          xPlaneRear: { fillColor: 'yellow',  mesh3d: {visible: false}},\n *          yPlaneFront: { visible: true, fillColor: 'blue'},\n *\n *          // Axes on planes\n *          xPlaneRearYAxis: {strokeColor: 'red'},\n *          xPlaneRearZAxis: {strokeColor: 'red'},\n *\n *          yPlaneFrontXAxis: {strokeColor: 'blue'},\n *          yPlaneFrontZAxis: {strokeColor: 'blue'},\n *\n *          zPlaneFrontXAxis: {visible: false},\n *          zPlaneFrontYAxis: {visible: false}\n *      });\n *\n * </pre><div id=\"JXGdd06d90e-be5d-4531-8f0b-65fc30b1a7c7\" class=\"jxgbox\" style=\"width: 500px; height: 500px;\"></div>\n * <script type=\"text/javascript\">\n *     (function() {\n *         var board = JXG.JSXGraph.initBoard('JXGdd06d90e-be5d-4531-8f0b-65fc30b1a7c7',\n *             {boundingbox: [-8, 8, 8,-8], axis: false, showcopyright: false, shownavigation: false});\n *         var bound = [-5, 5];\n *         var view = board.create('view3d',\n *             [[-6, -3], [8, 8],\n *             [bound, bound, bound]],\n *             {\n *                 // Main axes\n *                 axesPosition: 'center',\n *                 xAxis: { strokeColor: 'blue', strokeWidth: 3},\n *                 // Planes\n *                 xPlaneRear: { fillColor: 'yellow',  mesh3d: {visible: false}},\n *                 yPlaneFront: { visible: true, fillColor: 'blue'},\n *                 // Axes on planes\n *                 xPlaneRearYAxis: {strokeColor: 'red'},\n *                 xPlaneRearZAxis: {strokeColor: 'red'},\n *                 yPlaneFrontXAxis: {strokeColor: 'blue'},\n *                 yPlaneFrontZAxis: {strokeColor: 'blue'},\n *                 zPlaneFrontXAxis: {visible: false},\n *                 zPlaneFrontYAxis: {visible: false}\n *             });\n *     })();\n *\n * </script><pre>\n *\n */\nJXG.createView3D = function (board, parents, attributes) {\n  var view,\n    attr,\n    x,\n    y,\n    w,\n    h,\n    coords = parents[0],\n    // llft corner\n    size = parents[1]; // [w, h]\n\n  attr = Type.copyAttributes(attributes, board.options, \"view3d\");\n  view = new JXG.View3D(board, parents, attr);\n  view.defaultAxes = view.create(\"axes3d\", parents, attributes);\n  x = coords[0];\n  y = coords[1];\n  w = size[0];\n  h = size[1];\n\n  /**\n   * Slider to adapt azimuth angle\n   * @name JXG.View3D#az_slide\n   * @type {Slider}\n   */\n  view.az_slide = board.create(\"slider\", [[x - 1, y - 2], [x + w + 1, y - 2], [0, 1.0, 2 * Math.PI]], {\n    style: 6,\n    name: \"az\",\n    point1: {\n      frozen: true\n    },\n    point2: {\n      frozen: true\n    }\n  });\n\n  /**\n   * Slider to adapt elevation angle\n   *\n   * @name JXG.View3D#el_slide\n   * @type {Slider}\n   */\n  view.el_slide = board.create(\"slider\", [[x - 1, y], [x - 1, y + h], [0, 0.3, Math.PI / 2]], {\n    style: 6,\n    name: \"el\",\n    point1: {\n      frozen: true\n    },\n    point2: {\n      frozen: true\n    }\n  });\n  view.board.highlightInfobox = function (x, y, el) {\n    var d,\n      i,\n      c3d,\n      foot,\n      pre = '<span style=\"color:black; font-size:200%\">\\u21C4 &nbsp;</span>',\n      brd = el.board,\n      arr,\n      infobox,\n      p = null;\n    if (view.isVerticalDrag()) {\n      pre = '<span style=\"color:black; font-size:200%\">\\u21C5 &nbsp;</span>';\n    }\n    // Search 3D parent\n    for (i = 0; i < el.parents.length; i++) {\n      p = brd.objects[el.parents[i]];\n      if (p.is3D) {\n        break;\n      }\n    }\n    if (p) {\n      foot = [1, 0, 0, p.coords[3]];\n      c3d = view.project2DTo3DPlane(p.element2D, [1, 0, 0, 1], foot);\n      if (!view.isInCube(c3d)) {\n        view.board.highlightCustomInfobox('', p);\n        return;\n      }\n      d = Type.evaluate(p.visProp.infoboxdigits);\n      infobox = view.board.infobox;\n      if (d === 'auto') {\n        if (infobox.useLocale()) {\n          arr = [pre, '(', infobox.formatNumberLocale(p.X()), ' | ', infobox.formatNumberLocale(p.Y()), ' | ', infobox.formatNumberLocale(p.Z()), ')'];\n        } else {\n          arr = [pre, '(', Type.autoDigits(p.X()), ' | ', Type.autoDigits(p.Y()), ' | ', Type.autoDigits(p.Z()), ')'];\n        }\n      } else {\n        if (infobox.useLocale()) {\n          arr = [pre, '(', infobox.formatNumberLocale(p.X(), d), ' | ', infobox.formatNumberLocale(p.Y(), d), ' | ', infobox.formatNumberLocale(p.Z(), d), ')'];\n        } else {\n          arr = [pre, '(', Type.toFixed(p.X(), d), ' | ', Type.toFixed(p.Y(), d), ' | ', Type.toFixed(p.Z(), d), ')'];\n        }\n      }\n      view.board.highlightCustomInfobox(arr.join(''), p);\n    } else {\n      view.board.highlightCustomInfobox('(' + x + ', ' + y + ')', el);\n    }\n  };\n  view.board.update();\n  return view;\n};\nJXG.registerElement(\"view3d\", JXG.createView3D);\nexport default JXG.View3D;","map":{"version":3,"names":["JXG","Const","Type","Mat","GeometryElement","Composition","View3D","board","parents","attributes","constructor","OBJECT_TYPE_VIEW3D","OBJECT_CLASS_3D","objects","elementsByName","defaultAxes","matrix3D","llftCorner","size","bbox3D","r","projectionType","timeoutAzimuth","id","setId","finalizeAdding","elType","methodMap","deepCopy","prototype","extend","create","elementType","prefix","el","indexOf","push","concat","select","str","onlyByIdOrName","flist","olist","i","l","s","isString","exists","isFunction","isObject","setAttribute","filterElements","objectsList","length","updateParallelProjection","a","e","f","mat","el_slide","Value","az_slide","Math","sin","cos","updateCentralProjection","az","ax","ay","v","nrm","Tcam1","eye","d","foc","tan","PI","zf","zn","Pref","up","A","norm","crossProduct","matVecMult","matMatMult","update","mat2D","shift","needsUpdate","evaluate","visProp","projection","viewPortTransform","updateRenderer","removeObject","object","saveMethod","isArray","debug","project3DTo2D","x","y","z","vec","w","arguments","slice","project2DTo3DPlane","point2d","normal","foot","rhs","le","n","sol","innerProduct","coords","usrCoords","eps","Numerics","Gauss","err","NaN","project2DTo3DVertical","coords3D","m3D","b","abs","project3DToCube","c3d","cube","intersectionLineCube","p","rnew","r0","r1","max","min","isInCube","q","intersectionPlanePlane","plane1","plane2","ret","dir","Geometry","meet3Planes","meetPlanePlane","vec1","vec2","Infinity","axpy","getMesh","func","interval_u","interval_v","i_u","i_v","u","c2d","delta_u","delta_v","steps_u","steps_v","dataX","dataY","animateAzimuth","_smin","_smax","sdiff","newVal","position","setTimeout","bind","stopAzimuth","clearTimeout","isVerticalDrag","key","verticaldrag","enabled","createView3D","view","attr","h","copyAttributes","options","style","name","point1","frozen","point2","highlightInfobox","pre","brd","arr","infobox","is3D","element2D","highlightCustomInfobox","infoboxdigits","useLocale","formatNumberLocale","X","Y","Z","autoDigits","toFixed","join","registerElement"],"sources":["D:/study things/web/weblab4-main/node_modules/jsxgraph/src/3d/view3d.js"],"sourcesContent":["/*\n    Copyright 2008-2023\n        Matthias Ehmann,\n        Carsten Miller,\n        Andreas Walter,\n        Alfred Wassermann\n\n    This file is part of JSXGraph.\n\n    JSXGraph is free software dual licensed under the GNU LGPL or MIT License.\n\n    You can redistribute it and/or modify it under the terms of the\n\n      * GNU Lesser General Public License as published by\n        the Free Software Foundation, either version 3 of the License, or\n        (at your option) any later version\n      OR\n      * MIT License: https://github.com/jsxgraph/jsxgraph/blob/master/LICENSE.MIT\n\n    JSXGraph is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License and\n    the MIT License along with JSXGraph. If not, see <https://www.gnu.org/licenses/>\n    and <https://opensource.org/licenses/MIT/>.\n */\n/*global JXG:true, define: true*/\n\nimport JXG from \"../jxg\";\nimport Const from \"../base/constants\";\nimport Type from \"../utils/type\";\nimport Mat from \"../math/math\";\nimport GeometryElement from \"../base/element\";\nimport Composition from \"../base/composition\";\n\n/**\n * 3D view inside of a JXGraph board.\n *\n * @class Creates a new 3D view. Do not use this constructor to create a 3D view. Use {@link JXG.Board#create} with\n * type {@link View3D} instead.\n *\n * @augments JXG.GeometryElement\n * @param {Array} parents Array consisting of lower left corner [x, y] of the view inside the board, [width, height] of the view\n * and box size [[x1, x2], [y1,y2], [z1,z2]]. If the view's azimuth=0 and elevation=0, the 3D view will cover a rectangle with lower left corner\n * [x,y] and side lengths [w, h] of the board.\n */\nJXG.View3D = function (board, parents, attributes) {\n    this.constructor(board, attributes, Const.OBJECT_TYPE_VIEW3D, Const.OBJECT_CLASS_3D);\n\n    /**\n     * An associative array containing all geometric objects belonging to the view.\n     * Key is the id of the object and value is a reference to the object.\n     * @type Object\n     * @private\n     */\n    this.objects = {};\n\n    /**\n     * An array containing all geometric objects in this view in the order of construction.\n     * @type Array\n     * @private\n     */\n    // this.objectsList = [];\n\n    /**\n     * An associative array / dictionary to store the objects of the board by name. The name of the object is the key and value is a reference to the object.\n     * @type Object\n     * @private\n     */\n    this.elementsByName = {};\n\n    /**\n     * Default axes of the 3D view, contains the axes of the view or null.\n     *\n     * @type {Object}\n     * @default null\n     */\n    this.defaultAxes = null;\n\n    /**\n     * @type  {Array}\n     * @private\n    */\n    // 3 x 4 matrix\n    // 3D-to-2D transformation matrix\n    this.matrix3D = [\n        [1, 0, 0, 0],\n        [0, 1, 0, 0],\n        [0, 0, 1, 0]\n    ];\n\n    /**\n     * @type array\n     * @private\n    */\n    //     Lower left corner [x, y] of the 3D view if elevation and azimuth are set to 0.\n    this.llftCorner = parents[0];\n\n    /**\n     * Width and height [w, h] of the 3D view if elevation and azimuth are set to 0.\n     * @type array\n     * @private\n     */\n    this.size = parents[1];\n\n    /**\n     * Bounding box (cube) [[x1, x2], [y1,y2], [z1,z2]] of the 3D view\n     * @type array\n     */\n    this.bbox3D = parents[2];\n\n    /**\n     * Distance of the view to the origin. In other words, its\n     * the radius of the sphere where the camera sits.view.board.update\n     * @type Number\n     */\n    this.r = -1;\n\n    this.projectionType = 'parallel';\n\n    this.timeoutAzimuth = null;\n\n    this.id = this.board.setId(this, \"V\");\n    this.board.finalizeAdding(this);\n    this.elType = \"view3d\";\n\n    this.methodMap = Type.deepCopy(this.methodMap, {\n        // TODO\n    });\n};\nJXG.View3D.prototype = new GeometryElement();\n\nJXG.extend(\n    JXG.View3D.prototype, /** @lends JXG.View3D.prototype */ {\n\n    /**\n     * Creates a new 3D element of type elementType.\n     * @param {String} elementType Type of the element to be constructed given as a string e.g. 'point3d' or 'surface3d'.\n     * @param {Array} parents Array of parent elements needed to construct the element e.g. coordinates for a 3D point or two\n     * 3D points to construct a line. This highly depends on the elementType that is constructed. See the corresponding JXG.create*\n     * methods for a list of possible parameters.\n     * @param {Object} [attributes] An object containing the attributes to be set. This also depends on the elementType.\n     * Common attributes are name, visible, strokeColor.\n     * @returns {Object} Reference to the created element. This is usually a GeometryElement3D, but can be an array containing\n     * two or more elements.\n     */\n    create: function (elementType, parents, attributes) {\n        var prefix = [],\n            // is3D = false,\n            el;\n\n        if (elementType.indexOf(\"3d\") > 0) {\n            // is3D = true;\n            prefix.push(this);\n        }\n        el = this.board.create(elementType, prefix.concat(parents), attributes);\n\n        return el;\n    },\n\n    /**\n     * Select a single or multiple elements at once.\n     * @param {String|Object|function} str The name, id or a reference to a JSXGraph 3D element in the 3D view. An object will\n     * be used as a filter to return multiple elements at once filtered by the properties of the object.\n     * @param {Boolean} onlyByIdOrName If true (default:false) elements are only filtered by their id, name or groupId.\n     * The advanced filters consisting of objects or functions are ignored.\n     * @returns {JXG.GeometryElement3D|JXG.Composition}\n     * @example\n     * // select the element with name A\n     * view.select('A');\n     *\n     * // select all elements with strokecolor set to 'red' (but not '#ff0000')\n     * view.select({\n     *   strokeColor: 'red'\n     * });\n     *\n     * // select all points on or below the x/y plane and make them black.\n     * view.select({\n     *   elType: 'point3d',\n     *   Z: function (v) {\n     *     return v <= 0;\n     *   }\n     * }).setAttribute({color: 'black'});\n     *\n     * // select all elements\n     * view.select(function (el) {\n     *   return true;\n     * });\n     */\n    select: function (str, onlyByIdOrName) {\n        var flist,\n            olist,\n            i,\n            l,\n            s = str;\n\n        if (s === null) {\n            return s;\n        }\n\n        // It's a string, most likely an id or a name.\n        if (Type.isString(s) && s !== \"\") {\n            // Search by ID\n            if (Type.exists(this.objects[s])) {\n                s = this.objects[s];\n                // Search by name\n            } else if (Type.exists(this.elementsByName[s])) {\n                s = this.elementsByName[s];\n                // // Search by group ID\n                // } else if (Type.exists(this.groups[s])) {\n                //     s = this.groups[s];\n            }\n\n            // It's a function or an object, but not an element\n        } else if (\n            !onlyByIdOrName &&\n            (Type.isFunction(s) || (Type.isObject(s) && !Type.isFunction(s.setAttribute)))\n        ) {\n            flist = Type.filterElements(this.objectsList, s);\n\n            olist = {};\n            l = flist.length;\n            for (i = 0; i < l; i++) {\n                olist[flist[i].id] = flist[i];\n            }\n            s = new Composition(olist);\n\n            // It's an element which has been deleted (and still hangs around, e.g. in an attractor list\n        } else if (\n            Type.isObject(s) &&\n            Type.exists(s.id) &&\n            !Type.exists(this.objects[s.id])\n        ) {\n            s = null;\n        }\n\n        return s;\n    },\n\n    updateParallelProjection: function () {\n        var r, a, e, f,\n            mat = [\n                [1, 0, 0, 0],\n                [0, 1, 0, 0],\n                [0, 0, 1, 0]\n            ];\n\n        // mat projects homogeneous 3D coords in View3D\n        // to homogeneous 2D coordinates in the board\n        e = this.el_slide.Value();\n        r = this.r;\n        a = this.az_slide.Value();\n        f = r * Math.sin(e);\n\n        mat[1][1] = r * Math.cos(a);\n        mat[1][2] = -r * Math.sin(a);\n        mat[2][1] = f * Math.sin(a);\n        mat[2][2] = f * Math.cos(a);\n        mat[2][3] = Math.cos(e);\n\n        return mat;\n    },\n\n    updateCentralProjection: function () {\n        var r, e, a,\n            az, ax, ay, v, nrm,\n            // See https://www.mathematik.uni-marburg.de/~thormae/lectures/graphics1/graphics_6_1_eng_web.html\n            // bbox3D is always at the world origin, i.e. T_obj is the unit matrix.\n            // All vectors contain affine coordinates and have length 3\n            // The matrices are of size 4x4.\n            Tcam1, // The inverse camera transformation\n            eye, d,\n            foc = 1 / Math.tan(0.5 * Math.PI / 2),\n            zf = 20,\n            zn = 8,\n            Pref = [\n                0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]),\n                0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]),\n                0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1])\n            ],\n            up = [0, 0, 1],\n            A = [\n                [0, 0, 0, -1],\n                [0, foc, 0, 0],\n                [0, 0, foc, 0],\n                [2 * zf * zn / (zn - zf), 0, 0, (zf + zn) / (zn - zf)]\n            ];\n\n        a = this.az_slide.Value();\n        e = this.el_slide.Value() * 2;\n        // r = this.r;\n\n        // Sphere\n        r = 12;\n        a += 3 * Math.PI * 0.5;\n        eye = [\n            r * Math.cos(a) * Math.cos(e),\n            -r * Math.sin(a) * Math.cos(e),\n            r * Math.sin(e)\n        ];\n\n        // Circle\n        // r = 8;\n        // // up = [0, Math.cos(e), Math.sin(e)];\n        // up = [0, 0, 1];\n        // eye = [\n        //     -r * Math.cos(a),\n        //     -r * Math.sin(a),\n        //     1. * r\n        // ];\n\n        d = [eye[0] - Pref[0], eye[1] - Pref[1], eye[2] - Pref[2]];\n        nrm = Mat.norm(d, 3);\n        az = [d[0] / nrm, d[1] / nrm, d[2] / nrm];\n\n        nrm = Mat.norm(up, 3);\n        v = [up[0] / nrm, up[1] / nrm, up[2] / nrm];\n\n        ax = Mat.crossProduct(v, az);\n        ay = Mat.crossProduct(az, ax);\n\n        v = Mat.matVecMult([ax, ay, az], eye);\n        Tcam1 = [\n            [1, 0, 0, 0],\n            [-v[0], ax[0], ax[1], ax[2]],\n            [-v[1], ay[0], ay[1], ay[2]],\n            [-v[2], az[0], az[1], az[2]]\n        ];\n        A = Mat.matMatMult(A, Tcam1);\n\n        return A;\n    },\n\n    update: function () {\n        // Update 3D-to-2D transformation matrix with the actual\n        // elevation and azimuth angles.\n\n        var mat2D, shift, size;\n\n        if (\n            !Type.exists(this.el_slide) ||\n            !Type.exists(this.az_slide) ||\n            !this.needsUpdate\n        ) {\n            return this;\n        }\n\n        mat2D = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1]\n        ];\n\n        this.projectionType = Type.evaluate(this.visProp.projection);\n\n        if (this.projectionType === 'parallel') {\n            // Parallel projection\n            // Rotate the scenery around the center of the box,\n            // not around the origin\n            shift = [\n                [1, 0, 0, 0],\n                [-0.5 * (this.bbox3D[0][0] + this.bbox3D[0][1]), 1, 0, 0],\n                [-0.5 * (this.bbox3D[1][0] + this.bbox3D[1][1]), 0, 1, 0],\n                [-0.5 * (this.bbox3D[2][0] + this.bbox3D[2][1]), 0, 0, 1]\n            ];\n\n            // Add a second transformation to scale and shift the projection\n            // on the board, usually called viewport.\n            mat2D[1][1] = this.size[0] / (this.bbox3D[0][1] - this.bbox3D[0][0]); // w / d_x\n            mat2D[2][2] = this.size[1] / (this.bbox3D[1][1] - this.bbox3D[1][0]); // h / d_y\n            mat2D[1][0] = this.llftCorner[0] + mat2D[1][1] * 0.5 * (this.bbox3D[0][1] - this.bbox3D[0][0]); // llft_x\n            mat2D[2][0] = this.llftCorner[1] + mat2D[2][2] * 0.5 * (this.bbox3D[1][1] - this.bbox3D[1][0]); // llft_y\n\n            // this.matrix3D is a 3x4 matrix\n            this.matrix3D = this.updateParallelProjection();\n            // Combine the projections\n            this.matrix3D = Mat.matMatMult(mat2D, Mat.matMatMult(this.matrix3D, shift));\n\n        } else {\n            // Central projection\n            // this.matrix3D is a 4x4 matrix\n            this.matrix3D = this.updateCentralProjection();\n\n            size = 0.4;\n            mat2D[1][1] = this.size[0] / (2 * size); // w / d_x\n            mat2D[2][2] = this.size[1] / (2 * size); // h / d_y\n            mat2D[1][0] = this.llftCorner[0] + mat2D[1][1] * 0.5 * (2 * size); // llft_x\n            mat2D[2][0] = this.llftCorner[1] + mat2D[2][2] * 0.5 * (2 * size); // llft_y\n\n            // The transformations this.matrix3D and mat2D can not be combined yet, since\n            // the projected vector has to be normalized in between in\n            // project3DTo2D\n            this.viewPortTransform = mat2D;\n        }\n\n        return this;\n    },\n\n    updateRenderer: function () {\n        this.needsUpdate = false;\n        return this;\n    },\n\n    removeObject: function (object, saveMethod) {\n        var i;\n\n        // this.board.removeObject(object, saveMethod);\n        if (Type.isArray(object)) {\n            for (i = 0; i < object.length; i++) {\n                this.removeObject(object[i]);\n            }\n            return this;\n        }\n\n        object = this.select(object);\n\n        // // If the object which is about to be removed unknown or a string, do nothing.\n        // // it is a string if a string was given and could not be resolved to an element.\n        if (!Type.exists(object) || Type.isString(object)) {\n            return this;\n        }\n\n        try {\n            //     // remove all children.\n            //     for (el in object.childElements) {\n            //         if (object.childElements.hasOwnProperty(el)) {\n            //             object.childElements[el].board.removeObject(object.childElements[el]);\n            //         }\n            //     }\n\n            delete this.objects[object.id];\n        } catch (e) {\n            JXG.debug(\"View3D \" + object.id + \": Could not be removed: \" + e);\n        }\n\n        // this.update();\n\n        this.board.removeObject(object, saveMethod);\n\n        return this;\n    },\n\n    /**\n     * Project 3D coordinates to 2D board coordinates\n     * The 3D coordinates are provides as three numbers x, y, z or one array of length 3.\n     *\n     * @param  {Number|Array} x\n     * @param  {Number[]} y\n     * @param  {Number[]} z\n     * @returns {Array} Array of length 3 containing the projection on to the board\n     * in homogeneous user coordinates.\n     */\n    project3DTo2D: function (x, y, z) {\n        var vec, w;\n        if (arguments.length === 3) {\n            vec = [1, x, y, z];\n        } else {\n            // Argument is an array\n            if (x.length === 3) {\n                vec = [1].concat(x);\n            } else {\n                vec = x;\n            }\n        }\n\n        w = Mat.matVecMult(this.matrix3D, vec);\n\n        if (this.projectionType === 'parallel') {\n            return w;\n        }\n\n        // Central projection\n        w[1] /= w[0];\n        w[2] /= w[0];\n        w[3] /= w[0];\n        w[0] /= w[0];\n\n        return Mat.matVecMult(this.viewPortTransform, w.slice(0, 3));\n    },\n\n    /**\n     * Project a 2D coordinate to the plane defined by point \"foot\"\n     * and the normal vector `normal`.\n     *\n     * @param  {JXG.Point} point2d\n     * @param  {Array} normal\n     * @param  {Array} foot\n     * @returns {Array} of length 4 containing the projected\n     * point in homogeneous coordinates.\n     */\n    project2DTo3DPlane: function (point2d, normal, foot) {\n        var mat, rhs, d, le,\n            n = normal.slice(1),\n            sol = [1, 0, 0, 0];\n\n        foot = foot || [1, 0, 0, 0];\n        le = Mat.norm(n, 3);\n        d = Mat.innerProduct(foot.slice(1), n, 3) / le;\n\n        mat = this.matrix3D.slice(0, 3); // True copy\n        mat.push([0].concat(n));\n\n        // 2D coordinates of point:\n        rhs = point2d.coords.usrCoords.concat([d]);\n        try {\n            // Prevent singularity in case elevation angle is zero\n            if (mat[2][3] === 1.0) {\n                mat[2][1] = mat[2][2] = Mat.eps * 0.001;\n            }\n            sol = Mat.Numerics.Gauss(mat, rhs);\n        } catch (err) {\n            sol = [0, NaN, NaN, NaN];\n        }\n\n        return sol;\n    },\n\n    /**\n     * Project a 2D coordinate to a new 3D position by keeping\n     * the 3D x, y coordinates and changing only the z coordinate.\n     * All horizontal moves of the 2D point are ignored.\n     *\n     * @param {JXG.Point} point2d\n     * @param {Array} coords3D\n     * @returns {Array} of length 4 containing the projected\n     * point in homogeneous coordinates.\n     */\n    project2DTo3DVertical: function (point2d, coords3D) {\n        var m3D = this.matrix3D[2],\n            b = m3D[3],\n            rhs = point2d.coords.usrCoords[2]; // y in 2D\n\n        rhs -= m3D[0] * m3D[0] + m3D[1] * coords3D[1] + m3D[2] * coords3D[2];\n        if (Math.abs(b) < Mat.eps) {\n            return coords3D; // No changes\n        } else {\n            return coords3D.slice(0, 3).concat([rhs / b]);\n        }\n    },\n\n    /**\n     * Limit 3D coordinates to the bounding cube.\n     *\n     * @param {Array} c3d 3D coordinates [x,y,z]\n     * @returns Array with updated 3D coordinates.\n     */\n    project3DToCube: function (c3d) {\n        var cube = this.bbox3D;\n        if (c3d[1] < cube[0][0]) {\n            c3d[1] = cube[0][0];\n        }\n        if (c3d[1] > cube[0][1]) {\n            c3d[1] = cube[0][1];\n        }\n        if (c3d[2] < cube[1][0]) {\n            c3d[2] = cube[1][0];\n        }\n        if (c3d[2] > cube[1][1]) {\n            c3d[2] = cube[1][1];\n        }\n        if (c3d[3] < cube[2][0]) {\n            c3d[3] = cube[2][0];\n        }\n        if (c3d[3] > cube[2][1]) {\n            c3d[3] = cube[2][1];\n        }\n\n        return c3d;\n    },\n\n    /**\n     * Intersect a ray with the bounding cube of the 3D view.\n     * @param {Array} p 3D coordinates [x,y,z]\n     * @param {Array} d 3D direction vector of the line (array of length 3)\n     * @param {Number} r direction of the ray (positive if r > 0, negative if r < 0).\n     * @returns Affine ratio of the intersection of the line with the cube.\n     */\n    intersectionLineCube: function (p, d, r) {\n        var rnew, i, r0, r1;\n\n        rnew = r;\n        for (i = 0; i < 3; i++) {\n            if (d[i] !== 0) {\n                r0 = (this.bbox3D[i][0] - p[i]) / d[i];\n                r1 = (this.bbox3D[i][1] - p[i]) / d[i];\n                if (r < 0) {\n                    rnew = Math.max(rnew, Math.min(r0, r1));\n                } else {\n                    rnew = Math.min(rnew, Math.max(r0, r1));\n                }\n            }\n        }\n        return rnew;\n    },\n\n    /**\n     * Test if coordinates are inside of the bounding cube.\n     * @param {array} q 3D coordinates [x,y,z] of a point.\n     * @returns Boolean\n     */\n    isInCube: function (q) {\n        return (\n            q[0] > this.bbox3D[0][0] - Mat.eps &&\n            q[0] < this.bbox3D[0][1] + Mat.eps &&\n            q[1] > this.bbox3D[1][0] - Mat.eps &&\n            q[1] < this.bbox3D[1][1] + Mat.eps &&\n            q[2] > this.bbox3D[2][0] - Mat.eps &&\n            q[2] < this.bbox3D[2][1] + Mat.eps\n        );\n    },\n\n    /**\n     *\n     * @param {JXG.Plane3D} plane1\n     * @param {JXG.Plane3D} plane2\n     * @param {JXG.Plane3D} d\n     * @returns {Array} of length 2 containing the coordinates of the defining points of\n     * of the intersection segment.\n     */\n    intersectionPlanePlane: function (plane1, plane2, d) {\n        var ret = [[], []],\n            p,\n            dir,\n            r,\n            q;\n\n        d = d || plane2.d;\n\n        p = Mat.Geometry.meet3Planes(\n            plane1.normal,\n            plane1.d,\n            plane2.normal,\n            d,\n            Mat.crossProduct(plane1.normal, plane2.normal),\n            0\n        );\n        dir = Mat.Geometry.meetPlanePlane(\n            plane1.vec1,\n            plane1.vec2,\n            plane2.vec1,\n            plane2.vec2\n        );\n        r = this.intersectionLineCube(p, dir, Infinity);\n        q = Mat.axpy(r, dir, p);\n        if (this.isInCube(q)) {\n            ret[0] = q;\n        }\n        r = this.intersectionLineCube(p, dir, -Infinity);\n        q = Mat.axpy(r, dir, p);\n        if (this.isInCube(q)) {\n            ret[1] = q;\n        }\n        return ret;\n    },\n\n    /**\n     * Generate mesh for a surface / plane.\n     * Returns array [dataX, dataY] for a JSXGraph curve's updateDataArray function.\n     * @param {Array|Function} func\n     * @param {Array} interval_u\n     * @param {Array} interval_v\n     * @returns Array\n     * @private\n     *\n     * @example\n     *  var el = view.create('curve', [[], []]);\n     *  el.updateDataArray = function () {\n     *      var steps_u = Type.evaluate(this.visProp.stepsu),\n     *           steps_v = Type.evaluate(this.visProp.stepsv),\n     *           r_u = Type.evaluate(this.range_u),\n     *           r_v = Type.evaluate(this.range_v),\n     *           func, ret;\n     *\n     *      if (this.F !== null) {\n     *          func = this.F;\n     *      } else {\n     *          func = [this.X, this.Y, this.Z];\n     *      }\n     *      ret = this.view.getMesh(func,\n     *          r_u.concat([steps_u]),\n     *          r_v.concat([steps_v]));\n     *\n     *      this.dataX = ret[0];\n     *      this.dataY = ret[1];\n     *  };\n     *\n     */\n    getMesh: function (func, interval_u, interval_v) {\n        var i_u, i_v, u, v,\n            c2d, delta_u, delta_v,\n            p = [0, 0, 0],\n            steps_u = interval_u[2],\n            steps_v = interval_v[2],\n            dataX = [],\n            dataY = [];\n\n        delta_u = (Type.evaluate(interval_u[1]) - Type.evaluate(interval_u[0])) / steps_u;\n        delta_v = (Type.evaluate(interval_v[1]) - Type.evaluate(interval_v[0])) / steps_v;\n\n        for (i_u = 0; i_u <= steps_u; i_u++) {\n            u = interval_u[0] + delta_u * i_u;\n            for (i_v = 0; i_v <= steps_v; i_v++) {\n                v = interval_v[0] + delta_v * i_v;\n                if (Type.isFunction(func)) {\n                    p = func(u, v);\n                } else {\n                    p = [func[0](u, v), func[1](u, v), func[2](u, v)];\n                }\n                c2d = this.project3DTo2D(p);\n                dataX.push(c2d[1]);\n                dataY.push(c2d[2]);\n            }\n            dataX.push(NaN);\n            dataY.push(NaN);\n        }\n\n        for (i_v = 0; i_v <= steps_v; i_v++) {\n            v = interval_v[0] + delta_v * i_v;\n            for (i_u = 0; i_u <= steps_u; i_u++) {\n                u = interval_u[0] + delta_u * i_u;\n                if (Type.isFunction(func)) {\n                    p = func(u, v);\n                } else {\n                    p = [func[0](u, v), func[1](u, v), func[2](u, v)];\n                }\n                c2d = this.project3DTo2D(p);\n                dataX.push(c2d[1]);\n                dataY.push(c2d[2]);\n            }\n            dataX.push(NaN);\n            dataY.push(NaN);\n        }\n\n        return [dataX, dataY];\n    },\n\n    /**\n     *\n     */\n    animateAzimuth: function () {\n        var s = this.az_slide._smin,\n            e = this.az_slide._smax,\n            sdiff = e - s,\n            newVal = this.az_slide.Value() + 0.1;\n\n        this.az_slide.position = (newVal - s) / sdiff;\n        if (this.az_slide.position > 1) {\n            this.az_slide.position = 0.0;\n        }\n        this.board.update();\n\n        this.timeoutAzimuth = setTimeout(\n            function () {\n                this.animateAzimuth();\n            }.bind(this),\n            200\n        );\n    },\n\n    /**\n     *\n     */\n    stopAzimuth: function () {\n        clearTimeout(this.timeoutAzimuth);\n        this.timeoutAzimuth = null;\n    },\n\n    /**\n     * Check if vertical dragging is enabled and which action is needed.\n     * Default is shiftKey.\n     *\n     * @returns Boolean\n     * @private\n     */\n    isVerticalDrag: function () {\n        var b = this.board,\n            key;\n        if (!Type.evaluate(this.visProp.verticaldrag.enabled)) {\n            return false;\n        }\n        key = '_' + Type.evaluate(this.visProp.verticaldrag.key) + 'Key';\n        return b[key];\n    }\n});\n\n/**\n * @class This element creates a 3D view.\n * @pseudo\n * @description  A View3D element provides the container and the methods to create and display 3D elements.\n * It is contained in a JSXGraph board.\n * @name View3D\n * @augments JXG.View3D\n * @constructor\n * @type Object\n * @throws {Exception} If the element cannot be constructed with the given parent objects an exception is thrown.\n * @param {Array_Array_Array} lower,dim,cube  Here, lower is an array of the form [x, y] and\n * dim is an array of the form [w, h].\n * The arrays [x, y] and [w, h] define the 2D frame into which the 3D cube is\n * (roughly) projected. If the view's azimuth=0 and elevation=0, the 3D view will cover a rectangle with lower left corner\n * [x,y] and side lengths [w, h] of the board.\n * The array 'cube' is of the form [[x1, x2], [y1, y2], [z1, z2]]\n * which determines the coordinate ranges of the 3D cube.\n *\n * @example\n *  var bound = [-5, 5];\n *  var view = board.create('view3d',\n *      [[-6, -3],\n *       [8, 8],\n *       [bound, bound, bound]],\n *      {\n *          // Main axes\n *          axesPosition: 'center',\n *          xAxis: { strokeColor: 'blue', strokeWidth: 3},\n *\n *          // Planes\n *          xPlaneRear: { fillColor: 'yellow',  mesh3d: {visible: false}},\n *          yPlaneFront: { visible: true, fillColor: 'blue'},\n *\n *          // Axes on planes\n *          xPlaneRearYAxis: {strokeColor: 'red'},\n *          xPlaneRearZAxis: {strokeColor: 'red'},\n *\n *          yPlaneFrontXAxis: {strokeColor: 'blue'},\n *          yPlaneFrontZAxis: {strokeColor: 'blue'},\n *\n *          zPlaneFrontXAxis: {visible: false},\n *          zPlaneFrontYAxis: {visible: false}\n *      });\n *\n * </pre><div id=\"JXGdd06d90e-be5d-4531-8f0b-65fc30b1a7c7\" class=\"jxgbox\" style=\"width: 500px; height: 500px;\"></div>\n * <script type=\"text/javascript\">\n *     (function() {\n *         var board = JXG.JSXGraph.initBoard('JXGdd06d90e-be5d-4531-8f0b-65fc30b1a7c7',\n *             {boundingbox: [-8, 8, 8,-8], axis: false, showcopyright: false, shownavigation: false});\n *         var bound = [-5, 5];\n *         var view = board.create('view3d',\n *             [[-6, -3], [8, 8],\n *             [bound, bound, bound]],\n *             {\n *                 // Main axes\n *                 axesPosition: 'center',\n *                 xAxis: { strokeColor: 'blue', strokeWidth: 3},\n *                 // Planes\n *                 xPlaneRear: { fillColor: 'yellow',  mesh3d: {visible: false}},\n *                 yPlaneFront: { visible: true, fillColor: 'blue'},\n *                 // Axes on planes\n *                 xPlaneRearYAxis: {strokeColor: 'red'},\n *                 xPlaneRearZAxis: {strokeColor: 'red'},\n *                 yPlaneFrontXAxis: {strokeColor: 'blue'},\n *                 yPlaneFrontZAxis: {strokeColor: 'blue'},\n *                 zPlaneFrontXAxis: {visible: false},\n *                 zPlaneFrontYAxis: {visible: false}\n *             });\n *     })();\n *\n * </script><pre>\n *\n */\nJXG.createView3D = function (board, parents, attributes) {\n    var view, attr,\n        x, y, w, h,\n        coords = parents[0], // llft corner\n        size = parents[1]; // [w, h]\n\n    attr = Type.copyAttributes(attributes, board.options, \"view3d\");\n    view = new JXG.View3D(board, parents, attr);\n    view.defaultAxes = view.create(\"axes3d\", parents, attributes);\n\n    x = coords[0];\n    y = coords[1];\n    w = size[0];\n    h = size[1];\n\n    /**\n     * Slider to adapt azimuth angle\n     * @name JXG.View3D#az_slide\n     * @type {Slider}\n     */\n    view.az_slide = board.create(\n        \"slider\",\n        [\n            [x - 1, y - 2],\n            [x + w + 1, y - 2],\n            [0, 1.0, 2 * Math.PI]\n        ],\n        {\n            style: 6,\n            name: \"az\",\n            point1: { frozen: true },\n            point2: { frozen: true }\n        }\n    );\n\n    /**\n     * Slider to adapt elevation angle\n     *\n     * @name JXG.View3D#el_slide\n     * @type {Slider}\n     */\n    view.el_slide = board.create(\n        \"slider\",\n        [\n            [x - 1, y],\n            [x - 1, y + h],\n            [0, 0.3, Math.PI / 2]\n        ],\n        {\n            style: 6,\n            name: \"el\",\n            point1: { frozen: true },\n            point2: { frozen: true }\n        }\n    );\n\n    view.board.highlightInfobox = function (x, y, el) {\n        var d, i, c3d, foot,\n            pre = '<span style=\"color:black; font-size:200%\">\\u21C4 &nbsp;</span>',\n            brd = el.board,\n            arr, infobox,\n            p = null;\n\n        if (view.isVerticalDrag()) {\n            pre = '<span style=\"color:black; font-size:200%\">\\u21C5 &nbsp;</span>';\n        }\n        // Search 3D parent\n        for (i = 0; i < el.parents.length; i++) {\n            p = brd.objects[el.parents[i]];\n            if (p.is3D) {\n                break;\n            }\n        }\n        if (p) {\n            foot = [1, 0, 0, p.coords[3]];\n            c3d = view.project2DTo3DPlane(p.element2D, [1, 0, 0, 1], foot);\n            if (!view.isInCube(c3d)) {\n                view.board.highlightCustomInfobox('', p);\n                return;\n            }\n            d = Type.evaluate(p.visProp.infoboxdigits);\n            infobox = view.board.infobox;\n            if (d === 'auto') {\n                if (infobox.useLocale()) {\n                    arr = [pre, '(', infobox.formatNumberLocale(p.X()), ' | ', infobox.formatNumberLocale(p.Y()), ' | ', infobox.formatNumberLocale(p.Z()), ')'];\n                } else {\n                    arr = [pre, '(', Type.autoDigits(p.X()), ' | ', Type.autoDigits(p.Y()), ' | ', Type.autoDigits(p.Z()), ')'];\n                }\n\n            } else {\n                if (infobox.useLocale()) {\n                    arr = [pre, '(', infobox.formatNumberLocale(p.X(), d), ' | ', infobox.formatNumberLocale(p.Y(), d), ' | ', infobox.formatNumberLocale(p.Z(), d), ')'];\n                } else {\n                    arr = [pre, '(', Type.toFixed(p.X(), d), ' | ', Type.toFixed(p.Y(), d), ' | ', Type.toFixed(p.Z(), d), ')'];\n                }\n            }\n            view.board.highlightCustomInfobox(arr.join(''), p);\n        } else {\n            view.board.highlightCustomInfobox('(' + x + ', ' + y + ')', el);\n        }\n    };\n\n    view.board.update();\n\n    return view;\n};\n\nJXG.registerElement(\"view3d\", JXG.createView3D);\n\nexport default JXG.View3D;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}